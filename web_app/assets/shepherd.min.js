!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):((t="undefined"!=typeof globalThis?globalThis:t||self).Shepherd=e())}(this,(function(){"use strict";function t(t){return t.charAt(0).toUpperCase()+t.slice(1)}function e(t,e){return"HTMLElement"in window&&e instanceof HTMLElement?t.contains(e):!1}function i(t,e){return function(i){e.includes(i.keyCode)&&t(i)}}var s=new WeakMap,n={set(t,e,i){s.set(t,{callback:e,event:i})},get(t){return s.get(t)},delete(t){s.delete(t)}};function o(t,e={}){if(void 0===t)return;let i;const s={};if(document.body.contains(t)){i=t,s.element=t;const e=function(){if("undefined"==typeof document)return null;const t=document.createElement("div");return t.style.visibility="hidden",t.style.width="100px",t.style.msOverflowStyle="scrollbar",document.body.appendChild(t),t.offsetWidth-t.clientWidth};s.hasScrollbar=i.scrollHeight>i.clientHeight||i.scrollWidth>i.clientWidth,s.hasScrollbar&&function(t){t.forEach((i=>{const s=n.get(i);s&&e.removeEventListener(s.event,s.callback)}))}(i)}else s.element=void 0,s.hasScrollbar=!1;if(s.hasScrollbar){e.events.forEach((o=>{const r=function(t,e){return e.split(" ").map((e=>i(t,e)))}(t,e.keyCode);s[o]=r.length>1?function(t){r.forEach((e=>e(t)))}:r[0],n.set(t,{callback:s[o],event:o}),i.addEventListener(o,s[o])}))}}var r={};"undefined"!=typeof window&&(r=window);const a=["top","bottom","right","left"],l=["start","end"],c=[...a,{name:"auto",start:()=>0,end:()=>0}].reduce(((t,e)=>t.concat(l.reduce(((t,i)=>t.concat([e,`${e}-${i}`])),""))),[]),h=["before-show","show","before-hide","hide","cancel","complete","active","inactive","destroy"];function d(t){let e={};return t instanceof HTMLElement?(e.element=t,e.title=t.title,e.text=t.innerHTML):(e=t||{}),e.id=e.id||function(){const t=Date.now();return`step-${t}-${Math.floor(1e3*Math.random())}`}(),e}function p(t,e){for(let i in e){const s=e[i];void 0!==s&&(t[i]=s)}return t}const u=["className","highlightClass","scrollTo","scrollIntoViewOptions","popperOptions","tippyOptions"],m=u.reduce(((t,e)=>{const i={};return i[e]=void 0,Object.assign(t,i)}),{});function f(t,e,i){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}const g=new WeakMap;function y(t){return g.get(t)}function b(t,e){g.set(t,e)}function w(t){g.delete(t)}function v(t,e,i){for(var s=e.length,n=0;n<s;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function E(t,e,i){return e&&v(t.prototype,e),i&&v(t,i),t}class S{constructor(t,e){f(this,"tour",void 0),f(this,"classPrefix",void 0),f(this,"styles",void 0),this.tour=t,this.classPrefix=this.tour.options.classPrefix,this.styles=e}on(t,e,i){const s="string"==typeof t,n=s?document.querySelector(t):t;if(n){const t=y(n)||[];t.push({event:e,handler:i}),b(n,t),n.addEventListener(e,i)}return this}off(t,e){const i="string"==typeof t,s=i?document.querySelector(t):t;if(s){const t=y(s);if(t){let i=!1;t.forEach(((s,n)=>{s.event===e&&(t.splice(n,1),i=!0)})),i&&b(s,t),s.removeEventListener(e,t)}return this}}function O(t,e){return`
    <div class="shepherd-arrow" data-popper-arrow></div>
    <div class="shepherd-content">
      <header class="shepherd-header">
        ${e.title?`<h3 class="shepherd-title">${e.title}</h3>`:""}
        ${t.options.showCancelLink?`<button class="shepherd-cancel-icon" type="button" aria-label="${t.options.cancelIcon.ariaLabel}">${t.options.cancelIcon.text}</button>`:""}
      </header>
      ${e.text?`<div class="shepherd-text">${"function"==typeof e.text?e.text():e.text}</div>`:""}
      ${function(t){const e=document.createElement("footer"),i=t.buttons;return e.classList.add("shepherd-footer"),i&&i.forEach((t=>{const i=document.createElement("button");b(i,t.events||{});const s=t.classes||"";i.classList.add(...s.split(" ")),i.classList.add("shepherd-button"),i.setAttribute("data-id",t.id||""),i.setAttribute("tabindex","0"),i.setAttribute("aria-label",t.ariaLabel||""),t.text&&(i.innerText=t.text),e.appendChild(i)})),e.outerHTML}(e)}
    </div>
  `}function P(t,e,i){for(var s=e.length,n=0;n<s;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function C(t,e,i){return e&&P(t.prototype,e),i&&P(t,i),t}const k=new WeakMap;class T{constructor(t,e){f(this,"tour",void 0),this.tour=t,k.set(this,e)}get activeTour(){return k.get(this)}}class x{constructor(t,e,i){f(this,"el",void 0),f(this,"classPrefix",void 0),f(this,"styles",void 0),this.el=t,this.classPrefix=e.classPrefix,this.styles=i,this.el.classList.add(`${this.classPrefix}element`),e.options.classes&&this.el.classList.add(...e.options.classes.split(" "))}addContent(t){this.el.innerHTML=O(t.tour,t)}addPopper(t){this.el.setAttribute("data-popper-id",t)}destroy(){this.el.classList.remove(`${this.classPrefix}element`,...Object.keys(this.styles).map((t=>"shepherd"===t?"":this.styles[t]))),this.el.removeAttribute("data-popper-id")}hide(){this.el.hidden=!0}show(){this.el.hidden=!1}}var A=Object.freeze({__proto__:null,Step:class extends S{constructor(t,e){super(t,"step"),f(this,"el",void 0),f(this,"id",void 0),f(this,"options",void 0),f(this,"target",void 0),f(this,"popper",void 0),f(this,"tour",void 0),f(this,"when",void 0);const i=this.tour.options.defaultStepOptions;this.options=p(this.options||{},i),this.options=p(this.options,e),this.el="string"==typeof this.options.element?document.querySelector(this.options.element):this.options.element,this.id=this.options.id,this.tour=t;const s=this.tour.options,n={};if(s.classPrefix&&Object.assign(n,{shepherd:`${s.classPrefix}element`}),this.styles=n,this.when=this.options.when,this._parseAttachTo(),this.el){const t=new x(this.el,this,this.styles);t.addContent(this),this.tour.addStep(this)}this.target=this.options.attachTo.element;const o=this._getPopperOptions();return this.popper=r.Popper.createPopper(this.target,this.el,o),this._setupEvents(),this}cancel(){this.tour.cancel(),this.trigger("cancel")}complete(){this.tour.complete(),this.trigger("complete")}destroy(){this.trigger("destroy"),this.popper&&this.popper.destroy();const t=this.tour.steps;t.splice(t.indexOf(this),1),this.tour.removeStep(this),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el),this._updateStepOnHide()}getTour(){return this.tour}hide(){this.tour.modal.hide(),this.el.classList.remove("shepherd-enabled"),this.target.classList.remove(`${this.classPrefix}target`),this.target.classList.remove(`${this.classPrefix}enabled`)}isActive(){const t=this.tour.getCurrentStep();return t&&t.id===this.id}isCentered(){return!this.options.attachTo.element||"string"==typeof this.options.attachTo.element&&!document.querySelector(this.options.attachTo.element)}isOpen(){return this.el.classList.contains("shepherd-enabled")}show(){this.el.classList.add("shepherd-enabled"),this.target&&this.target.classList.add(`${this.classPrefix}target`,`${this.classPrefix}enabled`),this.tour.modal.show(this),this.popper&&this.popper.update(),this.trigger("show")}updateStepOptions(t){Object.assign(this.options,t),this.popper&&this.popper.setOptions(this._getPopperOptions())}_getPopperOptions(){const t=this.options.popperOptions||{};let e=t.modifiers;e||(e=[]);const i=[{name:"preventOverflow",options:{altAxis:!0}},{name:"offset",options:{offset:[0,8]}},{name:"arrow",options:{element:".shepherd-arrow",padding:5}}];return e=i.concat(e),Object.assign(t,{placement:this._getPopperPlacement(),modifiers:e})}_getPopperPlacement(){return this.options.attachTo.on}_parseAttachTo(){const t={element:null,on:null};if(this.options.attachTo){if("string"==typeof this.options.attachTo)try{t.element=document.querySelector(this.options.attachTo)}catch(t){throw new Error(`Could not find selector: ${this.options.attachTo}`)}else"object"==typeof this.options.attachTo&&(t.element=this.options.attachTo.element,t.on=this.options.attachTo.on),t.element||(t.element=document.body)}return this.options.attachTo=t,this.options.attachTo.on||(this.options.attachTo.on="string"==typeof this.options.attachTo.element?this.options.attachTo.element.getBoundingClientRect().top>r.innerHeight/2?"top":"bottom":"bottom"),this.options.attachTo.on}_setupEvents(){this.el.addEventListener("keydown",this._onKeyDown.bind(this)),this.tour.on("cancel",(()=>{this._updateStepOnHide()})),this.tour.on("complete",(()=>{this._updateStepOnHide()}));const t=this.el.querySelector(".shepherd-cancel-icon");t&&t.addEventListener("click",(t=>{t.preventDefault(),this.cancel()}));const e=this.el.querySelector(".shepherd-footer");if(e){const t=e.querySelectorAll(".shepherd-button");t&&t.forEach((t=>{const e=y(t);e&&Object.keys(e).map((i=>{t.addEventListener(i,e[i])}))}))}}_onKeyDown(t){if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Escape","Enter"," "].includes(t.code)){const e=this.el.querySelector(".shepherd-button:focus"),i=this.el.querySelectorAll(".shepherd-button");let s=e?Array.prototype.indexOf.call(i,e):-1;switch(t.code){case"ArrowUp":case"ArrowLeft":t.preventDefault(),s=0===s?i.length-1:s-1,i[s].focus();break;case"ArrowDown":case"ArrowRight":t.preventDefault(),s=s===i.length-1?0:s+1,i[s].focus();break;case"Escape":this.cancel();break;default:e&&" "===t.code&&e.click()}}}_updateStepOnHide(){this.trigger("hide"),this.tour.modal.hide()}},Tour:class extends S{constructor(t={}){super(this,"tour"),f(this,"steps",void 0),f(this,"id",void 0),f(this,"modal",void 0),this.options=p({},t),this.options.defaultStepOptions=p({classes:"",scrollTo:!1,scrollIntoViewOptions:void 0,showCancelLink:!0},t.defaultStepOptions),this.options.classPrefix=this.options.classPrefix||"",this.steps=[],this.modal=this.options.useModal?new(C(function(t,e){E(this,t,e)},[{key:"hide",value:function(){this.el.classList.remove("shepherd-modal-is-open")}},{key:"show",value:function(){this.el.classList.add("shepherd-modal-is-open")}}]))(this.options.classPrefix,this.options.modalOverlayOpeningPadding,this.options.modalOverlayOpeningRadius):{hide:()=>null,show:()=>null},this.id=this.options.tourName||`tour--${Math.floor(1e3*Math.random())}--${Date.now()}`,"undefined"!=typeof this.options.steps&&this.options.steps.length>0&&this.addSteps(this.options.steps),this._bindTourEvents(),this._setTourID()}addStep(t,e){let i;return"string"==typeof t?i={id:t,options:e}:i=t,i.tour=this,new Shepherd.Step(this,i.options||i)}addSteps(t){if(Array.isArray(t)){t.forEach((t=>{this.addStep(t)}))}return this}back(){const t=this.steps.indexOf(this.getCurrentStep());this.show(t-1,!1)}cancel(){this.steps.forEach((t=>{t.destroy()})),this.trigger("cancel"),this.hide()}complete(){this.steps.forEach((t=>{t.destroy()})),this.trigger("complete"),this.hide()}confirmCancel(){this.options.confirmCancel&&confirm(this.options.confirmCancelMessage||"Are you sure you want to stop the tour?")&&this.cancel()}getCurrentStep(){return this.steps.find((t=>t.isOpen()))}hide(){this.getCurrentStep().hide()}next(){const t=this.steps.indexOf(this.getCurrentStep());this.show(t+1)}removeStep(t){const e=this.getCurrentStep();"object"==typeof t&&t.id&&(t=t.id),const i=this.steps.find((e=>e.id===t));i&&(i.isOpen()&&e&&e.id===i.id&&this.next(),i.destroy())}show(t=0,e=!0){const i=this.steps[t];if(i){const s=this.getCurrentStep();s&&s.hide(),this._scrollTo(i,(()=>{i.show(),this.trigger("show",i),e&&this.trigger("next",i)}))}}start(){this.trigger("start"),this.show()}_bindTourEvents(){this.on("next",this._onNext.bind(this)),this.on("back",this._onBack.bind(this))}_onBack(){this.back()}_onNext(){this.next()}_scrollTo(t,e){const i=this.options.defaultStepOptions&&this.options.defaultStepOptions.scrollTo;if(t.options.scrollTo||void 0===t.options.scrollTo&&i){const i=t.options.scrollIntoViewOptions||{block:"center"};t.target.scrollIntoView(i)}e&&e()}_setTourID(){const t=document.querySelector("body");t.setAttribute(`data-shepherd-active-tour-id`,this.id)}}(new T(r)),isFunction:function(t){return"function"==typeof t},isString:function(t){return"string"==typeof t},isElement:e,isElementAnimateable:function(t){if(!e(document.body,t))return!1;const i=window.getComputedStyle(t);return!(!i||"fixed"!==i.position&&"absolute"!==i.position)},isPath:function(t){return/M/g.test(t)},isObject:function(t){return"object"==typeof t},isNumber:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},isBody:function(t){return t instanceof HTMLBodyElement},isDocument:function(t){return t instanceof Document},isDate:function(t){return"[object Date]"===Object.prototype.toString.call(t)},isNodeList:function(t){return t instanceof NodeList},isHtmlCollection:function(t){return t instanceof HTMLCollection},isSvg:function(t){return t instanceof SVGElement},isDom:function(t){return e(document.body,t)||isSvg(t)||t instanceof Document||t instanceof Window},isHex:function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)},isRgb:function(t){return/^rgb/.test(t)},isRgba:function(t){return/^rgba/.test(t)},isHsl:function(t){return/^hsl/.test(t)},isHsla:function(t){return/^hsla/.test(t)},isColor:function(t){return isHex(t)||isRgb(t)||isRgba(t)||isHsl(t)||isHsla(t)},isTruthy:function(t){return!!t},isFalsy:function(t){return!t},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isUndefinedOrNull:function(t){return isUndefined(t)||isNull(t)},select:function(t){return"string"==typeof t?document.querySelectorAll(t):t},toArray:function(t){return[].slice.call(t)},getElements:function(t){return"string"==typeof t&&select(t)?toArray(select(t)):"string"==typeof t&&!select(t)?[]:isNodeList(t)||isHtmlCollection(t)?toArray(t):isDom(t)?[t]:t},getTransformOther:function(t){if(!isUndefined(t)){const e=/rotate\(([^)]+)\)/.exec(t);let i;return e&&(i=e[1].split(" ")),{rotate:isUndefined(i)?0:i[0]}}},getTransformTranslate:function(t){if(isUndefined(t))return{x:0,y:0};const e=/translateX\(([^)]+)\)/.exec(t),i=/translateY\(([^)]+)\)/.exec(t);let s,n;return s=isUndefined(e)?0:e[1].replace("px",""),n=isUndefined(i)?0:i[1].replace("px",""),{x:s,y:n}},getMatrix:function(t){const e=/[-\d.]+/g;return(isString(t)?t.match(e):"").map(Number)},getSvgTransforms:function(t){const e=getMatrix(t.getAttribute("transform"));return{rotation:Math.atan2(e[1],e[0])*180/Math.PI,translateX:e[4],translateY:e[5]}},getPath:function(t){const e=document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttribute("d",t),e},getTotalLength:function(t){return isPath(t)?getPath(t).getTotalLength():0},getPoint:function(t,e){return isPath(t)?getPath(t).getPointAtLength(e):void 0},getPoints:function(t,e=100){if(isPath(t)){const i=getTotalLength(t),s=[];for(let n=0;n<e;n++)s.push(getPoint(t,i/e*n));return s}},getAngle:function(t,e,i){const s=t-e,n=Math.PI/180;return Math.atan2(i.y-s.y,i.x-s.x)*n},getDistance:function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},getRandom:function(t=1,e=0){return Math.random()*(t-e)+e},getRandomInt:function(t=1,e=0){return Math.floor(Math.random()*(t-e+1))+e},getRandomFloat:function(t=1,e=0){return Math.random()*(t-e)+e},getRandomArrItem:function(t){return t[getRandomInt(t.length-1)]},getRandomRgb:function(){return{r:getRandomInt(255),g:getRandomInt(255),b:getRandomInt(255)}},getRandomHsl:function(t=360,e=0,i=100,s=0,n=100,o=0){return{h:getRandomInt(t,e),s:getRandomInt(i,s),l:getRandomInt(n,o)}},getRandomColor:function(){const t=getRandomHsl();return`hsl(${t.h}, ${t.s}%, ${t.l}%)`},relative:function(t,e){return t-t/100*(100-e)},map:function(t,e,i,s,n){return(t-e)*(n-s)/(i-e)+s},range:function(t,e,i){return Math.max(e,Math.min(t,i))},round:function(t,e=0){return Number(Math.round(t+"e"+e)+"e-"+e)},shuffle:function(t){let e=t.length,i,s;for(;0!==e;)s=Math.floor(Math.random()*e),e-=1,i=t[e],t[e]=t[s],t[s]=i;return t}});return"undefined"!=typeof Shepherd&&Object.assign(Shepherd,A),A.Tour}));



